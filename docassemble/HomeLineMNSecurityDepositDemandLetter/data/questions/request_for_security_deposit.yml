---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.MassAccess:massaccess.yml
  - docassemble.MassAppealsCourt:appeals-basic-questions.yml
---
metadata:
  title: >-
    Request for security deposit
  short title: >-
    Request for security depo
  description: |-
    This interview helps someone in Minnesota write a Request for security deposit.
  can_I_use_this_form: |
   If your landlord in Minnesota hasn't returned your security deposit or told you why they kept it, this tool will help you write a letter demanding your money back.
  before_you_start: |
    Write a request for security deposit letter in Minnesota. 
  
    If you are or were a tenant in Minnesota who has either:
 
    1. Not been given you security deposit back
    2. Received an explantaion for why you have not been given your security deposit back
  
    You can use this interview to demand your landlord give you your security deposit back.

  
    Before you get started, please gather:
  
    1. You need your landlords' mailing address.
    2. A copy of your lease will be helpful
  
    When you are finished, you will need to:
  
    1. Review the letter one more time, fix any mistakes.
    2. Deliver a copy of this letter by first class mail to the landlord, first class mail is normal mail for everyday items like letters.
    3. If the landlord does not answer your letter within 30 days, call the nonprofit Minnesota tenant advocacy organnization, **HOME Line** at 866-866-3546. A tenant advocate will discuss other options.

  

    Most people take about 10 minutes to complete this interview.

  maturity: production
  estimated_completion_minutes: 10
  estimated_completion_delta: 5
  LIST_topics: 
    - "HO-06-01-00-00"
  tags:
    - "HO-06-01-00-00"
  authors:
    - Conner
  original_form: |
    [https://homelinemn.org/wp-content/uploads/Security-Deposit-Request-Form-Ltr_HOMLin_09-10.pdf]
  original_form_published_on: ""
  allowed_courts: []
  typical_role: "plaintiff"
  al_weaver_version: "1.11.0"
  generated_on: "2025-09-17"
  languages:
    - en
  jurisdiction: NAM-US-US+MI
  review_date: 2025-09-17
  form_titles:
    - Request for security deposit
  form_numbers: []
  update_notes: |
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "MN"
---
code: |
  github_repo_name =  'docassemble-RequestForSecurityDeposit'
---
code: |
  interview_short_title = "Write a Request for security deposit"
---
code: |
  al_form_type = "letter" 
---
objects:
  - other_parties: ALPeopleList.using(ask_number=True,target_number=1)
  - users: ALPeopleList.using(there_are_any=True)
  - rental_address: Address
---
sections:
  - review_request_for_security_deposit: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_request_for_security_deposit
code: |
  # Set the allowed courts for this interview
  nav.set_section("review_request_for_security_deposit")
  eligibility_check_complete
  user_role = "plaintiff"
  user_ask_role = "plaintiff"
  users.gather()
  users[0].address.address
  set_progress(10)
  rental_address.address
  landlord_name
  other_parties[0].address.address
  set_progress(30)
  set_parts(subtitle=str(users))
  move_in
  set_progress(50)
  move_out
  set_progress(60)
  security_deposit_value
  lease_rate_know
  set_progress(80)
  interest_display
  basic_questions_signature_flow
  set_progress(90)
  signature_date
  interview_order_request_for_security_deposit = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  request_for_security_deposit_intro
  interview_order_request_for_security_deposit
  signature_date
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  request_for_security_deposit_download
---
id: Request_for_security_deposit
continue button field: request_for_security_deposit_intro
question: |
  Write a request for security deposit letter in Minnesota. 
subquestion: |

 If your landlord in Minnesota hasn't returned your security deposit or told you why they kept it, this tool will help you write a letter demanding your money back.


  **Before you get started:**
  
  1. You need your landlords' mailing address.
  2. A copy of your lease will be helpful
  
  **When you are finished, you will need to:**
  
  1. Review the letter one more time, fix any mistakes.
  2. Deliver a copy of this letter by first class mail to the landlord, first class mail is normal mail for everyday items like letters.
  3. If the landlord does not answer your letter within 30 days, call the nonprofit Minnesota tenant advocacy organnization, **HOME Line** at 866-866-3546. A tenant advocate will discuss other options.

  

  **Most people take about 10 minutes to complete this interview.**
---
id: received deposit
question: | 
  Have you received your security deposit back?
fields:
  - no label: received_deposit
    datatype: yesnoradio
    required: True
---
id: received explanation
question: |
  Have you received an explanation for how the landlord used the deposit?
fields:
  - no label: received_explanation
    datatype: yesnoradio
    required: True
---
code: |
  if received_deposit:
    kick_out_cannot_use
  if received_explanation:
    kick_out_cannot_use
  eligibility_check_complete = True
---
event: kick_out_cannot_use
id: kickout
question: |
  This form is not right for you. 
subquestion: |
  % if received_deposit:
  You indicated that you have already received your security deposit back. This form is for tenants who have **not** received their deposit.
  % elif received_explanation:
  You indicated that you have received an explanation for how your deposit was used. This form is for tenants who have **not** received either their deposit **or** an explanation.
  % endif
---
id: any other users
question: |
  % if al_form_type in ['starts_case','existing_case','appeal']:
  Is anyone else on your side of this case?
  % else:
  Are any other tenants adding their name to this letter with you?
  % endif
subquestion: |
  % if len(users.elements) > 1:  
  So far you have told us about ${comma_and_list(users.complete_elements())}.
  % endif
fields:
  - no label: users.there_is_another
    datatype: yesnoradio
---
id: What is the address of the rental property?
question: |
  What is the address of the rental you want your deposit back from?
fields:
  - Street address: rental_address.address
    address autocomplete: True
  - Apartment: rental_address.unit
    required: false
  - City: rental_address.city
  - State: rental_address.state
  - Zip code: rental_address.zip
---
id: user i's address
question: |
  % if i == 0 and al_person_answering == "user":
  What is your current address?
  % else:
  What is ${ users[i] }'s current address?
  % endif
fields:
  - label: |
      % if i > 0 and al_person_answering == "user":
      Same as your address
      % else:
      Same as ${ users[0] }'s address
      % endif
    field: users[i].address
    datatype: object_radio
    choices:
      - users[0].address if defined("users[0].address.address") else None
    object labeler: |
      lambda y: y.on_one_line()      
    none of the above: |
      Somewhere else
    disable others: True
    show if:
      code: |
        i > 0 and defined("users[0].address.address")
  - ${ users[i].address.address_label}: users[i].address.address
    address autocomplete: True
  - ${ users[i].address.unit_label}: users[i].address.unit
    required: False
  - ${ users[i].address.city_label}: users[i].address.city
  - ${ users[i].address.state_label}: users[i].address.state
    code: |
      states_list(country_code=AL_DEFAULT_COUNTRY)
    default: ${ AL_DEFAULT_STATE }
  - ${ users[i].address.zip_label}: users[i].address.zip
    required: False
#  - ${ users[i].address.country_label}: users[i].address.country
#    code: countries_list()
#    default: ${ AL_DEFAULT_COUNTRY }
---
id: When did you move into the rental?
question: |
  When did your lease start at ${ rental_address.address }?
fields:
  - "Lease began on": move_in
    datatype: date
---
id: When did you move out of the rental?
question: |
  When did your lease end at ${ rental_address.address }?
fields:
  - "Lease ended on": move_out
    datatype: date
    min: |
      ${ move_in }
---
id: pay for sec depo
question: |
  How much did you pay for your security deposit?
fields:
  - "Deposit amount": security_deposit_value
    datatype: currency
    min: 0
---
id: Lease rate Q
terms: 
  interest rate: |
    The interest rate is the number used to calculate how much more money you will receive back. The number will be listed as a whole number. A 1% interest rate means we multiply the deposit by .01 and add that back to the deposit total. 
  legal default: |
    Since August 1, 2003, a 1 percent simple interest has been set. For example, if there is a deposit of $500, the interest for one year is five dollars. If the tenant is in the place for two years, it is $10. The interest from past years is not included in the calculation for future years.
question: |
  Is there a security deposit interest rate listed in your lease?
subquestion: |
  Most leases will not tell you a different {interest rate} than the {legal default} of 1%.
  
fields:
  - "": lease_rate_know
    datatype: yesnoradio
  - Lease rate number without percent sign: lease_rate
    datatype: number
    show if: lease_rate_know
---
code: |
  def rate_value(val):
      return val/100 if val else 0.01

  final_rate = rate_value(lease_rate if lease_rate_know else None)
  months_count = 0
  d = move_in
  while d < move_out:
      months_count += 1
      d = d.replace(month=d.month + 1 if d.month < 12 else 1, year=d.year if d.month < 12 else d.year + 1)

  monthly_rate = final_rate / 12
  interest_earned = round(security_deposit_value * monthly_rate * months_count, 2)
  security_deposit_value_interest = security_deposit_value + interest_earned
  

---
id: interest_display
question: |
  Security deposit with interest
subquestion: |
  Based on your move-in and move-out dates, the total interest earned is **${ currency(interest_earned) }**.

  Your security deposit plus interest is **${ currency(security_deposit_value_interest) }**.
continue button field: interest_display
---
id: landlord name
question: |
  What is your landlord's name?
fields:
  - no label: landlord_name
---
code: |
  other_parties[0].name.first = landlord_name
---
id: preview request_for_security_deposit
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_recipient_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_request_for_security_deposit'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: request_for_security_deposit_preview_question    
---
code: |
  signature_fields = ['users[0].signature']
---
id: request for security deposit review screen
event: review_request_for_security_deposit
question: |
  Review your answers
review:
  - Edit: security_deposit_value
    button: |
      **Security deposit value**:
      ${ currency(security_deposit_value) }
  - Edit: other_parties.revisit
    button: |
      **Other parties**

      % for item in other_parties:
        * ${ item }
      % endfor
  - Edit: move_out
    button: |
      **Move out**:
      ${ move_out }
  - Edit: users.revisit
    button: |
      **Users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: signature_date
    button: |
      **Date of Signature**:
      ${ signature_date }
  - Edit: rental_address
    button: |
      **Rental address**:
      ${ rental_address }
  - Edit: security_deposit_value_interest
    button: |
      **Security deposit value interest**:
      ${ currency(security_deposit_value_interest) }
---
continue button field: other_parties.revisit
question: |
  Edit other_parties
subquestion: |
  ${ other_parties.table }

  ${ other_parties.add_action() }
---
table: other_parties.table
rows: other_parties
columns:
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - address.address
  - name.first
confirm: True

---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - address.address
  - signature
confirm: True

---
id: download request_for_security_deposit
event: request_for_security_deposit_download
question: |
  All done
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_request_for_security_deposit'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=True) }

progress: 100
---
# ALDocument objects specify the metadata for each template
objects:
  - request_for_security_deposit_Post_interview_instructions: ALDocument.using(title="Instructions", filename="request_for_security_deposit_next_steps.docx", enabled=True, has_addendum=False)
  - request_for_security_deposit_attachment: ALDocument.using(title="Request for security deposit", filename="request_for_security_deposit", enabled=True, has_addendum=False, )
---
# Bundles group the ALDocuments into separate downloads, such as for court and for the user
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[request_for_security_deposit_Post_interview_instructions, request_for_security_deposit_attachment], filename="request_for_security_deposit", title="All forms to download for your records", enabled=True)
  - al_recipient_bundle: ALDocumentBundle.using(elements=[request_for_security_deposit_attachment],  filename="request_for_security_deposit", title="All forms to file", enabled=True)
---
# Each attachment defines a key in an ALDocument. We use `i` as the placeholder here so the same template is 
# used for "preview" and "final" keys, and logic in the template checks the value of 
# `i` to show or hide the user's signature
attachment:
  name: Post-interview-Instructions
  filename: request_for_security_deposit_next_steps
  docx template file: request_for_security_deposit_next_steps.docx
  variable name: request_for_security_deposit_Post_interview_instructions[i]
  skip undefined: True
  tagged pdf: True
---
attachment:
  name: request for security deposit
  filename: request_for_security_deposit
  variable name: request_for_security_deposit_attachment[i]
  skip undefined: True
  docx template file: request_for_security_deposit.docx
  tagged pdf: True



